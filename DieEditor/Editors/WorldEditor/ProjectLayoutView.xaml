<UserControl x:Class="DieEditor.Editors.ProjectLayoutView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:DieEditor.Editors"
             xmlns:proj="clr-namespace:DieEditor.GameProject"
             mc:Ignorable="d" 
			 d:DataContext="{d:DesignInstance Type=proj:Project, IsDesignTimeCreatable=True}"
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="32"/>
			<RowDefinition/>
		</Grid.RowDefinitions>
		<StackPanel Orientation="Horizontal" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Center">
			<Button Content="Add Scene" Grid.Column="0" 
				Width="96" Margin="20, 0, 0, 0"
				VerticalAlignment="Center" HorizontalAlignment="Left"
				Command="{Binding AddSceneCommand}"
			/>
		</StackPanel>

		<ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
			<ItemsControl ItemsSource="{Binding Scenes}">
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<StackPanel/>
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Expander IsExpanded="{Binding IsActive, Mode=OneWay}">
							<Expander.Header>
								<Grid>
									<StackPanel Orientation="Horizontal">
										<TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="16"/>
										<Button Content="Remove" Grid.Column="0" 
											Width="96"
											VerticalAlignment="Center" HorizontalAlignment="Left"
											Command="{ Binding DataContext.RemoveSceneCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
											CommandParameter="{Binding}" Margin="20, 0" Focusable="False"
										/>
										<Button Content="Add Entity" Grid.Column="0" 
											Width="96"
											VerticalAlignment="Center" HorizontalAlignment="Left"
											IsEnabled="{Binding IsActive}"
											Margin="20, 0" Focusable="False"
											Click="AddGameEntitiyButton_Click"
										/>
									</StackPanel>
								</Grid>
							</Expander.Header>
							<ListBox ItemsSource="{Binding GameEntities}" 
									 IsEnabled="{Binding IsActive}"
									 SelectionMode="Extended"
									 SelectionChanged="OnGameEntitiesListBox_SelectionChanged"
							>
								<ListBox.ItemTemplate>
									<DataTemplate>
										<StackPanel Orientation="Horizontal">
											<TextBlock Text="{Binding Name}" FontSize="14"/>
											<Button Content="Remove" Grid.Column="0" 
													Width="96"
													VerticalAlignment="Center" HorizontalAlignment="Left"
													Command="{ Binding ParentScene.RemoveGameEntitiyCommand}" 
													Margin="20, 0" Focusable="False"
													CommandParameter="{Binding}"
												/>
										</StackPanel>
									</DataTemplate>
								</ListBox.ItemTemplate>
							</ListBox>
						</Expander>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</ScrollViewer>
	</Grid>
</UserControl>
